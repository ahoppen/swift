{
    "name": "Swift",
    "build": {
        "dockerfile": "Dockerfile"
    },
    "extensions": [
        "vadimcn.vscode-lldb",
        "llvm-vs-code-extensions.vscode-clangd",
        "ms-vscode.cmake-tools",
        "ms-vscode-remote.remote-ssh",
        "ms-python.python",
        "twxs.cmake",
        "xaver.clang-format"
    ],
    "runArgs": [
        "--cap-add=SYS_PTRACE",
        "--security-opt",
        "seccomp=unconfined"
    ],
    "settings": {
        "cmake.buildDirectory": "/workspaces/build/Ninja-${variant:buildType}/swift-linux-x86_64",
        "cmake.cmakePath": "/workspaces/build/cmake-linux-x86_64/bin/cmake",
        "lldb.library": "/workspaces/build/canonical/lldb-linux-x86_64/lib/liblldb.so",
    },
    "remoteUser": "build-user",
    "containerUser": "build-user",
    // "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/swift,type=bind,consistency=delegated",
    // "workspaceMount": "source=swift,target=/workspaces,type=volume",
    // "workspaceFolder": "/workspaces/swift",
    "mounts": [
        "source=sccache,target=/home/build-user/.cache/sccache,type=volume",
        // "source=swift-workspaces,target=/workspaces,type=volume",
    ],
    "onCreateCommand": "/workspaces/swift/utils/update-checkout --clone $(ls /workspaces | sed -E 's/^/ --skip-repository /g')" // Clone all repositories that don't exist yet
}